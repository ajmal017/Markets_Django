{% load static %}
{% for key, value in dictionary.items %}

{% endfor %}
<!DOCTYPE html>
<html>
    <head>
        <title>Market analysis</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="{% static 'sector_analysis/style.css' %}">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        {% autoescape off %}
        <script type="text/javascript">
           
        </script>
        <script>
                 // create an empty array
            var dict  = JSON.parse('{{dict}}');
            console.log("{{img_path}}");
            
            DJANGO_STATIC_URL = '{{STATIC_URL}}';
            function remove_comp_buttons(){
                while(document.getElementById("comp_nav").getElementsByTagName("button").length>0){
                    console.log(1);
                    btn = document.getElementById("comp_nav").getElementsByTagName("button")[0];
                    btn.remove();

                }
            }

            function printname(event) {
                console.log(this.innerHTML);
            }     
            
            function convert_to_list(dict) {
                var arr = [];

                for (var key in dict) {
                    if (dict.hasOwnProperty(key)) {
                        arr.push( [ key ] );
                    }
                }
                return arr;
            }


            function create_buttons(sector){
                console.log(sector);
                console.log(dict);
                var tikrs = dict[sector];
                remove_comp_buttons();
                if (Object.keys(dict).indexOf(sector)!=-1){
                    for (i = 0, len = tikrs.length; i < len; i++) {
                        var div = document.getElementById('comp_nav');
                        var btn = document.createElement("BUTTON");
                        btn.innerText = tikrs[i];
                        btn.id = 'comp_'+tikrs[i];
                        btn.className = "btn btn-primary btn-sm m-1";
                        btn.addEventListener('click', function() {
                            elem = document.getElementById('comp_'+this.innerText);
                            img = document.getElementById("market_pic");
                            img.src = "/static/sector_analysis/images/"+sector+"/"+this.innerText+".png";
                            
                        });
                        
                        div.appendChild(btn);
                    }
                }
                }
                
        </script>
    {% endautoescape %}

    </head>
    <body>
        <div id="container" class="border border-primary" style="height: 600px;width: 1300px;position: fixed;">
            <!-- <div id=create>
            <button type="button" id="btn_create" onclick="create_buttons() ">Click me!</button>
            </div> -->
        <div id="Top_nav" class="border border-primary " style="width:95%; height:80px;position: fixed;">
            <br />
            <div class="btn-toolbar mb-3" role="toolbar" aria-label="Toolbar with button groups">
            <div class="btn-group mr-2" role="group" aria-label="First group">
            <button type="button" class="btn btn-secondary m-1">My Portfolio</button>
            <button type="button" class="btn btn-secondary m-1">Scanner </button>
            <button type="button" class="btn btn-secondary m-1">Dashboard </button>
            <button type="button" class="btn btn-secondary m-1">Fundamental Analysis</button>
            <button type="button" class="btn btn-secondary m-1">Technical Analysis</button>
            </div></div>
        </div>
        
        <div id="Right_fr" class="border border-primary d-inline-block" style="max-width:100%;
        max-height:100%;width: 15%;height:70%;position: fixed;;top:15%">
            <div>
                {% for sector in sectors %}
                <button button type="button" class="btn btn-success mr-1 mt-1 ml-1" 
                onclick="create_buttons('{{sector}}') ">{{ sector }}</button> <br />
                {% endfor %}
            </div>
            
        </div>
        <div id="comp_nav" class="border border-primary d-inline-block" style="max-width:100%;
        max-height:100%;width: 15%;height:70%;position: fixed;left:15%;top:15%">
                
        </div>
        <div id="Left_fr" class="border border-primary d-inline-block "  style="max-width:100%;
        max-height:100%;width: 65%;height:70%;position: fixed;left:30%;top:15%">
            <img id="market_pic" src="{% static 'sector_analysis/images/paper__.png' %} " style="max-width:100%;
            max-height:100%;"/>
            
        </div>
        
        
       
    </div>
    </body>
</html>